{
  "openapi": "3.1.0",
  "info": {
    "title": "relational-rust-server",
    "description": "Custodial Avalanche wallet service running inside Intel SGX enclave with Gramine.",
    "contact": {
      "name": "Relational Network"
    },
    "license": {
      "name": "AGPL-3.0-or-later",
      "identifier": "AGPL-3.0-or-later"
    },
    "version": "0.1.0"
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health check endpoint handler.",
        "description": "Returns 200 if all checks pass, 503 if any check fails.",
        "operationId": "health",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadyResponse"
                }
              }
            }
          },
          "503": {
            "description": "Service is unhealthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadyResponse"
                }
              }
            }
          }
        }
      }
    },
    "/health/live": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Liveness probe handler.",
        "description": "Always returns 200 if the process is running.\nDoes not check dependencies - use readiness for that.",
        "operationId": "liveness",
        "responses": {
          "200": {
            "description": "Service is alive",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/health/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness probe handler.",
        "description": "Returns 200 only if all dependencies are available.\nUse for Kubernetes readiness probes.",
        "operationId": "readiness",
        "responses": {
          "200": {
            "description": "Service is ready",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadyResponse"
                }
              }
            }
          },
          "503": {
            "description": "Service is not ready",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadyResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/audit/events": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Query audit logs.",
        "description": "Search and filter audit log entries. Supports date range, user ID,\nevent type, and resource filtering. Admin only.",
        "operationId": "query_audit_logs",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "description": "Start date (YYYY-MM-DD format).",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "description": "End date (YYYY-MM-DD format).",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "description": "Filter by user ID.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "event_type",
            "in": "query",
            "description": "Filter by event type.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "resource_type",
            "in": "query",
            "description": "Filter by resource type.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "resource_id",
            "in": "query",
            "description": "Filter by resource ID.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of results (default 100).",
            "required": false,
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Offset for pagination.",
            "required": false,
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Audit events",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditLogResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters"
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/fiat/requests/{request_id}/sync": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Manual fiat request sync.",
        "operationId": "sync_fiat_request_admin",
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "description": "Fiat request ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Fiat request synchronized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatSyncResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/fiat/reserve/topup": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Mint rEUR into reserve wallet.",
        "operationId": "topup_fiat_reserve",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReserveTopUpRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Reserve top-up submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReserveTransactionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "503": {
            "description": "Service unavailable"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/fiat/reserve/transfer": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Transfer rEUR from reserve wallet to destination.",
        "operationId": "transfer_fiat_reserve",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReserveTransferRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Reserve transfer submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReserveTransactionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/fiat/service-wallet": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get fiat reserve service-wallet status.",
        "operationId": "get_fiat_service_wallet",
        "responses": {
          "200": {
            "description": "Fiat reserve wallet status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatServiceWalletStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/fiat/service-wallet/bootstrap": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Idempotently bootstrap fiat reserve service wallet.",
        "operationId": "bootstrap_fiat_service_wallet",
        "responses": {
          "200": {
            "description": "Fiat reserve wallet bootstrapped",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatServiceWalletStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/health": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get detailed health information.",
        "description": "Returns comprehensive health status including storage metrics.\nMore detailed than the public health endpoint. Admin only.",
        "operationId": "get_detailed_health",
        "responses": {
          "200": {
            "description": "Detailed health status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetailedHealthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/stats": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get system statistics.",
        "description": "Returns aggregate statistics about the system including wallet counts,\ninvite usage, and storage metrics. Admin only.",
        "operationId": "get_system_stats",
        "responses": {
          "200": {
            "description": "System statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemStatsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/users": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "List all unique users with their resource counts.",
        "description": "Returns a summary of all users who have wallets, bookmarks, or recurring payments.",
        "operationId": "list_all_users",
        "responses": {
          "200": {
            "description": "User summaries",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminUserListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/wallets": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "List all wallets (admin view).",
        "description": "Returns all wallets across all users. Admin only.",
        "operationId": "list_all_wallets",
        "responses": {
          "200": {
            "description": "All wallets",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminWalletListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/wallets/{wallet_id}/activate": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Reactivate a suspended wallet (admin action).",
        "description": "Reactivates a previously suspended wallet.",
        "operationId": "activate_wallet",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet activated"
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          },
          "404": {
            "description": "Wallet not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/admin/wallets/{wallet_id}/suspend": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Suspend a wallet (admin action).",
        "description": "Suspends a wallet by ID. The wallet owner cannot perform operations\non suspended wallets until reactivated.",
        "operationId": "suspend_wallet",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet suspended"
          },
          "401": {
            "description": "Not authenticated"
          },
          "403": {
            "description": "Not authorized (admin required)"
          },
          "404": {
            "description": "Wallet not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/bookmarks": {
      "get": {
        "tags": [
          "Bookmarks"
        ],
        "summary": "List bookmarks for a wallet.",
        "description": "Returns all bookmarks for a wallet owned by the authenticated user.",
        "operationId": "list_bookmarks",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WalletAddress"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Bookmark"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not your wallet"
          },
          "404": {
            "description": "Wallet not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      },
      "post": {
        "tags": [
          "Bookmarks"
        ],
        "summary": "Create a new bookmark.",
        "description": "Creates a bookmark in a wallet owned by the authenticated user.",
        "operationId": "create_bookmark",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBookmarkRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Bookmark"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not your wallet"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/bookmarks/{bookmark_id}": {
      "delete": {
        "tags": [
          "Bookmarks"
        ],
        "summary": "Delete a bookmark.",
        "description": "Deletes a bookmark owned by the authenticated user.",
        "operationId": "delete_bookmark",
        "parameters": [
          {
            "name": "bookmark_id",
            "in": "path",
            "description": "Identifier of the bookmark to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Bookmark deleted"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not your bookmark"
          },
          "404": {
            "description": "Bookmark not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/fiat/offramp/requests": {
      "post": {
        "tags": [
          "Fiat"
        ],
        "summary": "Create fiat off-ramp request.",
        "operationId": "create_offramp_request",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFiatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Fiat off-ramp request created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatRequestResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Wallet not found"
          },
          "503": {
            "description": "Provider unavailable"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/fiat/onramp/requests": {
      "post": {
        "tags": [
          "Fiat"
        ],
        "summary": "Create fiat on-ramp request.",
        "operationId": "create_onramp_request",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFiatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Fiat on-ramp request created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatRequestResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Wallet not found"
          },
          "503": {
            "description": "Provider unavailable"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/fiat/providers": {
      "get": {
        "tags": [
          "Fiat"
        ],
        "summary": "List supported fiat providers for sandbox testing.",
        "operationId": "list_fiat_providers",
        "responses": {
          "200": {
            "description": "Supported fiat providers",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatProviderListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/fiat/providers/truelayer/webhook": {
      "post": {
        "tags": [
          "Fiat"
        ],
        "summary": "TrueLayer webhook callback endpoint.",
        "operationId": "truelayer_webhook",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrueLayerWebhookPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Webhook accepted"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Forbidden"
          },
          "503": {
            "description": "Webhook disabled"
          }
        }
      }
    },
    "/v1/fiat/requests": {
      "get": {
        "tags": [
          "Fiat"
        ],
        "summary": "List fiat requests for current user.",
        "operationId": "list_fiat_requests",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "query",
            "description": "Optional wallet filter.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Fiat requests listed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatRequestListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/fiat/requests/{request_id}": {
      "get": {
        "tags": [
          "Fiat"
        ],
        "summary": "Get fiat request by ID.",
        "operationId": "get_fiat_request",
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "description": "Fiat request ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Fiat request details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FiatRequestResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/invite": {
      "get": {
        "tags": [
          "Invites"
        ],
        "operationId": "get_invite",
        "parameters": [
          {
            "name": "invite_code",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Invite"
                }
              }
            }
          }
        }
      }
    },
    "/v1/invite/redeem": {
      "post": {
        "tags": [
          "Invites"
        ],
        "operationId": "redeem_invite",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RedeemInviteRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/v1/recurring/payment": {
      "post": {
        "tags": [
          "Recurring"
        ],
        "operationId": "create_recurring_payment",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRecurringPaymentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        }
      }
    },
    "/v1/recurring/payment/{recurring_payment_id}": {
      "put": {
        "tags": [
          "Recurring"
        ],
        "operationId": "update_recurring_payment",
        "parameters": [
          {
            "name": "recurring_payment_id",
            "in": "path",
            "description": "Identifier of the recurring payment to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRecurringPaymentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        }
      },
      "delete": {
        "tags": [
          "Recurring"
        ],
        "operationId": "delete_recurring_payment",
        "parameters": [
          {
            "name": "recurring_payment_id",
            "in": "path",
            "description": "Identifier of the recurring payment to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": ""
          }
        }
      }
    },
    "/v1/recurring/payment/{recurring_payment_id}/last-paid-date": {
      "put": {
        "tags": [
          "Recurring"
        ],
        "operationId": "update_last_paid_date",
        "parameters": [
          {
            "name": "recurring_payment_id",
            "in": "path",
            "description": "Identifier of the recurring payment to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLastPaidDateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/v1/recurring/payments": {
      "get": {
        "tags": [
          "Recurring"
        ],
        "operationId": "list_recurring_payments",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WalletAddress"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RecurringPayment"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/recurring/payments/today": {
      "get": {
        "tags": [
          "Recurring"
        ],
        "operationId": "recurring_payments_today",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RecurringPayment"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get the current authenticated user's information.",
        "description": "This endpoint returns the identity and roles of the currently authenticated user.",
        "operationId": "get_current_user",
        "responses": {
          "200": {
            "description": "User information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserMeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - invalid or missing token"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/v1/wallets": {
      "get": {
        "tags": [
          "Wallets"
        ],
        "summary": "List all wallets owned by the authenticated user.",
        "operationId": "list_wallets",
        "responses": {
          "200": {
            "description": "List of wallets",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WalletListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      },
      "post": {
        "tags": [
          "Wallets"
        ],
        "summary": "Create a new wallet for the authenticated user.",
        "description": "Generates a new p256 keypair inside the SGX enclave and stores it\nencrypted on disk. Returns the wallet metadata (never the private key).",
        "operationId": "create_wallet",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateWalletRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Wallet created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateWalletResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}": {
      "get": {
        "tags": [
          "Wallets"
        ],
        "summary": "Get a specific wallet by ID.",
        "description": "Only returns wallets owned by the authenticated user.",
        "operationId": "get_wallet",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WalletResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not your wallet"
          },
          "404": {
            "description": "Wallet not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Wallets"
        ],
        "summary": "Delete (soft-delete) a wallet.",
        "description": "Marks the wallet as deleted. The private key is retained for potential\nrecovery but the wallet cannot be used for new transactions.",
        "operationId": "delete_wallet",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteWalletResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not your wallet"
          },
          "404": {
            "description": "Wallet not found"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}/balance": {
      "get": {
        "tags": [
          "Wallets"
        ],
        "summary": "Get the balance of a wallet on the Avalanche C-Chain.",
        "description": "Returns native AVAX balance and any configured ERC-20 token balances.",
        "operationId": "get_wallet_balance",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "network",
            "in": "query",
            "description": "Network to query. Only \"fuji\" is supported.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ],
              "default": "fuji"
            }
          },
          {
            "name": "tokens",
            "in": "query",
            "description": "Additional token contract addresses to query (comma-separated)",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Balance retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BalanceResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not wallet owner"
          },
          "404": {
            "description": "Wallet not found"
          },
          "503": {
            "description": "Blockchain network unavailable"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}/balance/native": {
      "get": {
        "tags": [
          "Wallets"
        ],
        "summary": "Get only the native AVAX balance of a wallet (faster).",
        "operationId": "get_native_balance",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "network",
            "in": "query",
            "description": "Network to query. Only \"fuji\" is supported.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ],
              "default": "fuji"
            }
          },
          {
            "name": "tokens",
            "in": "query",
            "description": "Additional token contract addresses to query (comma-separated)",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Native balance retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NativeBalanceResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not wallet owner"
          },
          "404": {
            "description": "Wallet not found"
          },
          "503": {
            "description": "Blockchain network unavailable"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}/estimate": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Estimate gas for a transaction.",
        "description": "Returns estimated gas limit and cost before sending.",
        "operationId": "estimate_gas",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EstimateGasRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Gas estimate calculated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EstimateGasResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not wallet owner"
          },
          "404": {
            "description": "Wallet not found"
          },
          "503": {
            "description": "Blockchain network unavailable"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}/send": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Send a transaction from a wallet.",
        "description": "Signs the transaction inside the SGX enclave and broadcasts to the network.",
        "operationId": "send_transaction",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendTransactionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Transaction submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SendTransactionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not wallet owner"
          },
          "404": {
            "description": "Wallet not found"
          },
          "422": {
            "description": "Insufficient balance"
          },
          "503": {
            "description": "Blockchain network unavailable"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}/transactions": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "List transactions for a wallet.",
        "operationId": "list_transactions",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "network",
            "in": "query",
            "description": "Network filter (must be \"fuji\" if provided).",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of results (default: 50)",
            "required": false,
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "default": 50,
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not wallet owner"
          },
          "404": {
            "description": "Wallet not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    },
    "/v1/wallets/{wallet_id}/transactions/{tx_hash}": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get the status of a specific transaction.",
        "description": "Used for polling after send. Updates stored status from blockchain if pending.",
        "operationId": "get_transaction_status",
        "parameters": [
          {
            "name": "wallet_id",
            "in": "path",
            "description": "Wallet ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tx_hash",
            "in": "path",
            "description": "Transaction hash",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not wallet owner"
          },
          "404": {
            "description": "Wallet or transaction not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AdminUserListResponse": {
        "type": "object",
        "description": "Response for admin user list.",
        "required": [
          "users",
          "total"
        ],
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total unique users.",
            "minimum": 0
          },
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdminUserSummary"
            },
            "description": "User summaries."
          }
        }
      },
      "AdminUserSummary": {
        "type": "object",
        "description": "Admin user summary.",
        "required": [
          "user_id",
          "wallet_count",
          "bookmark_count",
          "recurring_payment_count"
        ],
        "properties": {
          "bookmark_count": {
            "type": "integer",
            "description": "Number of bookmarks.",
            "minimum": 0
          },
          "recurring_payment_count": {
            "type": "integer",
            "description": "Number of recurring payments.",
            "minimum": 0
          },
          "user_id": {
            "type": "string",
            "description": "User ID from Clerk."
          },
          "wallet_count": {
            "type": "integer",
            "description": "Number of wallets owned.",
            "minimum": 0
          }
        }
      },
      "AdminWalletItem": {
        "type": "object",
        "description": "Admin wallet list item (shows all wallets regardless of owner).",
        "required": [
          "wallet_id",
          "owner_user_id",
          "public_address",
          "status",
          "created_at"
        ],
        "properties": {
          "created_at": {
            "type": "string",
            "description": "When the wallet was created."
          },
          "owner_user_id": {
            "type": "string",
            "description": "Owner's user ID."
          },
          "public_address": {
            "type": "string",
            "description": "Public address."
          },
          "status": {
            "$ref": "#/components/schemas/WalletStatus",
            "description": "Wallet status."
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet unique identifier."
          }
        }
      },
      "AdminWalletListResponse": {
        "type": "object",
        "description": "Response for admin wallet list.",
        "required": [
          "wallets",
          "total"
        ],
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total count.",
            "minimum": 0
          },
          "wallets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdminWalletItem"
            },
            "description": "List of all wallets."
          }
        }
      },
      "AuditEvent": {
        "type": "object",
        "description": "An audit log entry.",
        "required": [
          "event_id",
          "timestamp",
          "event_type",
          "success"
        ],
        "properties": {
          "details": {
            "type": [
              "object",
              "null"
            ],
            "description": "Additional details as JSON."
          },
          "error": {
            "type": [
              "string",
              "null"
            ],
            "description": "Error message if operation failed."
          },
          "event_id": {
            "type": "string",
            "description": "Unique event ID."
          },
          "event_type": {
            "$ref": "#/components/schemas/AuditEventType",
            "description": "Type of event."
          },
          "ip_address": {
            "type": [
              "string",
              "null"
            ],
            "description": "IP address of the request (if available)."
          },
          "resource_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Resource affected (wallet_id, bookmark_id, etc.)."
          },
          "resource_type": {
            "type": [
              "string",
              "null"
            ],
            "description": "Resource type (wallet, bookmark, etc.)."
          },
          "success": {
            "type": "boolean",
            "description": "Whether the operation succeeded."
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "When the event occurred."
          },
          "user_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "User who triggered the event (if known)."
          }
        }
      },
      "AuditEventType": {
        "type": "string",
        "description": "Types of auditable events.",
        "enum": [
          "wallet_created",
          "wallet_deleted",
          "wallet_accessed",
          "transaction_signed",
          "transaction_broadcast",
          "bookmark_created",
          "bookmark_deleted",
          "invite_created",
          "invite_redeemed",
          "recurring_created",
          "recurring_updated",
          "recurring_deleted",
          "recurring_executed",
          "auth_success",
          "auth_failure",
          "permission_denied",
          "admin_access",
          "config_changed",
          "fiat_on_ramp_requested",
          "fiat_off_ramp_requested"
        ]
      },
      "AuditLogResponse": {
        "type": "object",
        "description": "Response for audit log queries.",
        "required": [
          "events",
          "total",
          "has_more"
        ],
        "properties": {
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditEvent"
            },
            "description": "Audit events matching the query."
          },
          "has_more": {
            "type": "boolean",
            "description": "Whether there are more results."
          },
          "total": {
            "type": "integer",
            "description": "Total count (before limit/offset).",
            "minimum": 0
          }
        }
      },
      "BalanceResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/WalletBalanceResponse",
            "description": "Balance information"
          },
          {
            "type": "object",
            "required": [
              "wallet_id"
            ],
            "properties": {
              "wallet_id": {
                "type": "string",
                "description": "Wallet ID"
              }
            }
          }
        ],
        "description": "Balance response."
      },
      "Bookmark": {
        "type": "object",
        "description": "A saved wallet address bookmark.\n\nBookmarks allow users to save frequently-used addresses with friendly names\nfor quick access when sending transactions.",
        "required": [
          "id",
          "wallet_id",
          "name",
          "address"
        ],
        "properties": {
          "address": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The bookmarked wallet address."
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for this bookmark."
          },
          "name": {
            "type": "string",
            "description": "User-friendly name for the bookmarked address."
          },
          "wallet_id": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The wallet this bookmark belongs to."
          }
        }
      },
      "CreateBookmarkRequest": {
        "type": "object",
        "description": "Request to create a new bookmark.",
        "required": [
          "wallet_id",
          "name",
          "address"
        ],
        "properties": {
          "address": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The wallet address to bookmark."
          },
          "name": {
            "type": "string",
            "description": "User-friendly name for the bookmark."
          },
          "wallet_id": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The wallet to add the bookmark to (must be owned by the user)."
          }
        }
      },
      "CreateFiatRequest": {
        "type": "object",
        "description": "Request body for creating fiat on-ramp/off-ramp requests.",
        "required": [
          "wallet_id",
          "amount_eur"
        ],
        "properties": {
          "amount_eur": {
            "type": "string",
            "description": "Amount in EUR decimal string (e.g. \"25.50\")."
          },
          "beneficiary_account_holder_name": {
            "type": [
              "string",
              "null"
            ],
            "description": "Beneficiary account holder name (required for off-ramp)."
          },
          "beneficiary_iban": {
            "type": [
              "string",
              "null"
            ],
            "description": "Beneficiary IBAN (required for off-ramp)."
          },
          "note": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional free-form note."
          },
          "provider": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional provider name (`truelayer_sandbox` default)."
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet to credit/debit for this fiat request."
          }
        }
      },
      "CreateRecurringPaymentRequest": {
        "type": "object",
        "description": "Request to create a recurring payment schedule.",
        "required": [
          "wallet_id",
          "wallet_public_key",
          "recipient",
          "amount",
          "currency_code",
          "payment_start_date",
          "frequency",
          "payment_end_date"
        ],
        "properties": {
          "amount": {
            "type": "number",
            "format": "double",
            "description": "Payment amount."
          },
          "currency_code": {
            "type": "string",
            "description": "Currency code (e.g., \"AVAX\", \"USDC\")."
          },
          "frequency": {
            "type": "integer",
            "format": "int32",
            "description": "Frequency in days between payments."
          },
          "payment_end_date": {
            "type": "integer",
            "format": "int32",
            "description": "End date (Unix timestamp in days, 0 = no end)."
          },
          "payment_start_date": {
            "type": "integer",
            "format": "int32",
            "description": "Start date (Unix timestamp in days)."
          },
          "recipient": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "Recipient address for payments."
          },
          "wallet_id": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The source wallet (must be owned by the user)."
          },
          "wallet_public_key": {
            "type": "string",
            "description": "Public key for the wallet."
          }
        }
      },
      "CreateWalletRequest": {
        "type": "object",
        "description": "Request to create a new wallet.",
        "properties": {
          "label": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional human-readable label for the wallet."
          }
        }
      },
      "CreateWalletResponse": {
        "type": "object",
        "description": "Response after creating a wallet.",
        "required": [
          "wallet",
          "message"
        ],
        "properties": {
          "message": {
            "type": "string",
            "description": "Message indicating success."
          },
          "wallet": {
            "$ref": "#/components/schemas/WalletResponse",
            "description": "The created wallet details."
          }
        }
      },
      "DeleteWalletResponse": {
        "type": "object",
        "description": "Response after deleting a wallet.",
        "required": [
          "message",
          "wallet_id"
        ],
        "properties": {
          "message": {
            "type": "string",
            "description": "Message indicating success."
          },
          "wallet_id": {
            "type": "string",
            "description": "The ID of the deleted wallet."
          }
        }
      },
      "DetailedHealthResponse": {
        "type": "object",
        "description": "Detailed health check response for admins.",
        "required": [
          "status",
          "storage",
          "auth_configured",
          "version",
          "build_time"
        ],
        "properties": {
          "auth_configured": {
            "type": "boolean",
            "description": "Auth configuration status."
          },
          "build_time": {
            "type": "string",
            "description": "Build timestamp."
          },
          "status": {
            "type": "string",
            "description": "Overall status."
          },
          "storage": {
            "$ref": "#/components/schemas/StorageHealth",
            "description": "Storage health."
          },
          "version": {
            "type": "string",
            "description": "Server version."
          }
        }
      },
      "EstimateGasRequest": {
        "type": "object",
        "description": "Request to estimate gas for a transaction.",
        "required": [
          "to",
          "amount"
        ],
        "properties": {
          "amount": {
            "type": "string",
            "description": "Amount to send in human-readable format (e.g., \"1.5\")"
          },
          "network": {
            "type": "string",
            "description": "Network: \"fuji\" only."
          },
          "to": {
            "type": "string",
            "description": "Recipient address (0x + 40 hex chars)"
          },
          "token": {
            "type": "string",
            "description": "Token type: \"native\" for AVAX or contract address for ERC-20"
          }
        }
      },
      "EstimateGasResponse": {
        "type": "object",
        "description": "Gas estimation response.",
        "required": [
          "gas_limit",
          "max_fee_per_gas",
          "max_priority_fee_per_gas",
          "estimated_cost_wei",
          "estimated_cost"
        ],
        "properties": {
          "estimated_cost": {
            "type": "string",
            "description": "Total estimated cost in AVAX"
          },
          "estimated_cost_wei": {
            "type": "string",
            "description": "Total estimated cost in wei"
          },
          "gas_limit": {
            "type": "string",
            "description": "Estimated gas limit"
          },
          "max_fee_per_gas": {
            "type": "string",
            "description": "Max fee per gas in wei"
          },
          "max_priority_fee_per_gas": {
            "type": "string",
            "description": "Max priority fee per gas in wei"
          }
        }
      },
      "FiatDirection": {
        "type": "string",
        "description": "Fiat request direction.",
        "enum": [
          "on_ramp",
          "off_ramp"
        ]
      },
      "FiatProviderListResponse": {
        "type": "object",
        "description": "Response for provider discovery.",
        "required": [
          "default_provider",
          "providers"
        ],
        "properties": {
          "default_provider": {
            "type": "string",
            "description": "Default provider ID if client does not pass one."
          },
          "providers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FiatProviderSummary"
            },
            "description": "Providers currently enabled by backend."
          }
        }
      },
      "FiatProviderSummary": {
        "type": "object",
        "description": "Provider summary exposed by fiat API.",
        "required": [
          "provider_id",
          "display_name",
          "sandbox",
          "enabled",
          "supports_on_ramp",
          "supports_off_ramp"
        ],
        "properties": {
          "display_name": {
            "type": "string",
            "description": "Human-friendly provider name for UI display."
          },
          "enabled": {
            "type": "boolean",
            "description": "Whether backend is configured and ready for this provider."
          },
          "provider_id": {
            "type": "string",
            "description": "Stable provider ID used by API requests."
          },
          "sandbox": {
            "type": "boolean",
            "description": "Indicates this provider is sandbox-only in current environment."
          },
          "supports_off_ramp": {
            "type": "boolean",
            "description": "Whether the provider can process off-ramp requests."
          },
          "supports_on_ramp": {
            "type": "boolean",
            "description": "Whether the provider can process on-ramp requests."
          }
        }
      },
      "FiatRequestListResponse": {
        "type": "object",
        "description": "List response for fiat requests.",
        "required": [
          "requests",
          "total"
        ],
        "properties": {
          "requests": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FiatRequestResponse"
            },
            "description": "Requests visible to the authenticated user."
          },
          "total": {
            "type": "integer",
            "description": "Total count.",
            "minimum": 0
          }
        }
      },
      "FiatRequestResponse": {
        "type": "object",
        "description": "Fiat request response returned to clients.",
        "required": [
          "request_id",
          "wallet_id",
          "direction",
          "amount_eur",
          "provider",
          "status",
          "chain_network",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "amount_eur": {
            "type": "string",
            "description": "Amount in EUR."
          },
          "chain_network": {
            "type": "string",
            "description": "Settlement network."
          },
          "created_at": {
            "type": "string",
            "description": "Creation time."
          },
          "deposit_tx_hash": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional detected deposit tx hash."
          },
          "direction": {
            "$ref": "#/components/schemas/FiatDirection",
            "description": "`on_ramp` or `off_ramp`."
          },
          "expected_amount_minor": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Expected token amount in minor units.",
            "minimum": 0
          },
          "failure_reason": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional failure reason."
          },
          "last_chain_sync_at": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional last chain sync time."
          },
          "last_provider_sync_at": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional last provider sync time."
          },
          "note": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional note."
          },
          "provider": {
            "type": "string",
            "description": "Provider identifier."
          },
          "provider_action_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional provider action URL (for redirect/continue flow)."
          },
          "provider_event_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional provider event id."
          },
          "provider_reference": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional provider reference/session ID."
          },
          "request_id": {
            "type": "string",
            "description": "Request ID."
          },
          "reserve_transfer_tx_hash": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional reserve transfer tx hash."
          },
          "service_wallet_address": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional service-wallet address."
          },
          "status": {
            "$ref": "#/components/schemas/FiatRequestStatus",
            "description": "Current status."
          },
          "updated_at": {
            "type": "string",
            "description": "Last update time."
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet ID tied to this request."
          }
        }
      },
      "FiatRequestStatus": {
        "type": "string",
        "description": "Fiat request lifecycle status.",
        "enum": [
          "queued",
          "awaiting_provider",
          "awaiting_user_deposit",
          "settlement_pending",
          "provider_pending",
          "completed",
          "failed"
        ]
      },
      "FiatServiceWalletStatusResponse": {
        "type": "object",
        "description": "Reserve-wallet status response.",
        "required": [
          "wallet_id",
          "public_address",
          "bootstrapped",
          "chain_network",
          "reur_contract_address",
          "avax_balance",
          "reur_balance",
          "reur_balance_raw"
        ],
        "properties": {
          "avax_balance": {
            "type": "string",
            "description": "Native AVAX balance (formatted)."
          },
          "bootstrapped": {
            "type": "boolean",
            "description": "Whether wallet was present/bootstrapped."
          },
          "chain_network": {
            "type": "string",
            "description": "Fuji-only network value."
          },
          "public_address": {
            "type": "string",
            "description": "Public address."
          },
          "reur_balance": {
            "type": "string",
            "description": "rEUR balance (formatted)."
          },
          "reur_balance_raw": {
            "type": "string",
            "description": "rEUR balance in raw minor units."
          },
          "reur_contract_address": {
            "type": "string",
            "description": "Configured rEUR contract."
          },
          "wallet_id": {
            "type": "string",
            "description": "Stable service-wallet id."
          }
        }
      },
      "FiatSyncResponse": {
        "type": "object",
        "description": "Manual sync response.",
        "required": [
          "request"
        ],
        "properties": {
          "request": {
            "$ref": "#/components/schemas/FiatRequestResponse",
            "description": "Synchronized request."
          }
        }
      },
      "HealthChecks": {
        "type": "object",
        "description": "Individual health check results.",
        "required": [
          "service"
        ],
        "properties": {
          "data_dir": {
            "type": [
              "string",
              "null"
            ],
            "description": "Data directory availability (if configured)."
          },
          "service": {
            "type": "string",
            "description": "Whether the service process is running."
          }
        }
      },
      "HealthResponse": {
        "type": "object",
        "description": "Simple health check response for liveness probes.",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string"
          }
        }
      },
      "Invite": {
        "type": "object",
        "description": "An invitation code for new users.\n\nInvites can be used to control access to the wallet service. Each invite\ncode can only be redeemed once.",
        "required": [
          "id",
          "code",
          "redeemed"
        ],
        "properties": {
          "code": {
            "type": "string",
            "description": "The invite code (shared with the invitee)."
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for this invite."
          },
          "redeemed": {
            "type": "boolean",
            "description": "Whether this invite has been used."
          }
        }
      },
      "NativeBalanceResponse": {
        "type": "object",
        "description": "Native token balance response (simpler version).",
        "required": [
          "wallet_id",
          "address",
          "network",
          "balance_wei",
          "balance"
        ],
        "properties": {
          "address": {
            "type": "string",
            "description": "Public address"
          },
          "balance": {
            "type": "string",
            "description": "AVAX balance formatted"
          },
          "balance_wei": {
            "type": "string",
            "description": "AVAX balance in wei"
          },
          "network": {
            "type": "string",
            "description": "Network name"
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet ID"
          }
        }
      },
      "ReadyResponse": {
        "type": "object",
        "description": "Health check response with individual component status.",
        "required": [
          "status",
          "checks"
        ],
        "properties": {
          "checks": {
            "$ref": "#/components/schemas/HealthChecks",
            "description": "Individual health checks and their results."
          },
          "status": {
            "type": "string",
            "description": "Overall health status (\"ok\" or \"degraded\")."
          }
        }
      },
      "RecurringPayment": {
        "type": "object",
        "description": "A scheduled recurring payment configuration.\n\nRecurring payments allow automatic transfers on a schedule. The actual\nexecution logic is handled by a separate service.",
        "required": [
          "id",
          "wallet_id",
          "wallet_public_key",
          "recipient",
          "amount",
          "currency_code",
          "payment_start_date",
          "frequency",
          "payment_end_date",
          "last_paid_date"
        ],
        "properties": {
          "amount": {
            "type": "number",
            "format": "double",
            "description": "Payment amount."
          },
          "currency_code": {
            "type": "string",
            "description": "Currency code (e.g., \"AVAX\", \"USDC\")."
          },
          "frequency": {
            "type": "integer",
            "format": "int32",
            "description": "Frequency in days between payments."
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for this payment schedule."
          },
          "last_paid_date": {
            "type": "integer",
            "format": "int32",
            "description": "Last payment date (Unix timestamp in days)."
          },
          "payment_end_date": {
            "type": "integer",
            "format": "int32",
            "description": "End date (Unix timestamp in days, 0 = no end)."
          },
          "payment_start_date": {
            "type": "integer",
            "format": "int32",
            "description": "Start date (Unix timestamp in days)."
          },
          "recipient": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The recipient address for payments."
          },
          "wallet_id": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "The source wallet for payments."
          },
          "wallet_public_key": {
            "type": "string",
            "description": "Public key of the wallet (for verification)."
          }
        }
      },
      "RedeemInviteRequest": {
        "type": "object",
        "description": "Request to redeem an invite code.",
        "required": [
          "invite_id"
        ],
        "properties": {
          "invite_id": {
            "type": "string",
            "description": "The invite ID to redeem."
          }
        }
      },
      "ReserveTopUpRequest": {
        "type": "object",
        "description": "Reserve top-up request.",
        "properties": {
          "amount_eur": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional amount in EUR decimal format."
          }
        }
      },
      "ReserveTransactionResponse": {
        "type": "object",
        "description": "Reserve transaction response.",
        "required": [
          "tx_hash",
          "explorer_url",
          "amount_eur",
          "amount_minor"
        ],
        "properties": {
          "amount_eur": {
            "type": "string",
            "description": "Amount used for operation."
          },
          "amount_minor": {
            "type": "string",
            "description": "Amount in token minor units."
          },
          "explorer_url": {
            "type": "string",
            "description": "Explorer URL for tx."
          },
          "tx_hash": {
            "type": "string",
            "description": "Submitted transaction hash."
          }
        }
      },
      "ReserveTransferRequest": {
        "type": "object",
        "description": "Reserve transfer request.",
        "required": [
          "to",
          "amount_eur"
        ],
        "properties": {
          "amount_eur": {
            "type": "string",
            "description": "Amount in EUR decimal format."
          },
          "to": {
            "type": "string",
            "description": "Destination EVM address."
          }
        }
      },
      "Role": {
        "type": "string",
        "description": "User roles for authorization.\n\n## Role Hierarchy\n\n- `Admin` - Full access to all endpoints and wallets\n- `Client` - Normal user, can only access own wallets\n- `Support` - Read-only access to metadata (no private keys)\n- `Auditor` - Read-only access to audit logs",
        "enum": [
          "admin",
          "client",
          "support",
          "auditor"
        ]
      },
      "SendTransactionRequest": {
        "type": "object",
        "description": "Request to send a transaction.",
        "required": [
          "to",
          "amount"
        ],
        "properties": {
          "amount": {
            "type": "string",
            "description": "Amount to send in human-readable format (e.g., \"1.5\")"
          },
          "gas_limit": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional gas limit override"
          },
          "max_priority_fee_per_gas": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional max priority fee per gas override (in wei)"
          },
          "network": {
            "type": "string",
            "description": "Network: \"fuji\" only."
          },
          "to": {
            "type": "string",
            "description": "Recipient address (0x + 40 hex chars)"
          },
          "token": {
            "type": "string",
            "description": "Token type: \"native\" for AVAX or contract address for ERC-20"
          }
        }
      },
      "SendTransactionResponse": {
        "type": "object",
        "description": "Transaction send response.",
        "required": [
          "tx_hash",
          "status",
          "explorer_url"
        ],
        "properties": {
          "explorer_url": {
            "type": "string",
            "description": "Block explorer URL"
          },
          "status": {
            "type": "string",
            "description": "Current status"
          },
          "tx_hash": {
            "type": "string",
            "description": "Transaction hash"
          }
        }
      },
      "StorageHealth": {
        "type": "object",
        "description": "Storage health details.",
        "required": [
          "data_dir",
          "exists",
          "writable",
          "total_files"
        ],
        "properties": {
          "data_dir": {
            "type": "string",
            "description": "Data directory path."
          },
          "exists": {
            "type": "boolean",
            "description": "Whether the data directory exists."
          },
          "total_files": {
            "type": "integer",
            "description": "Total files in storage (approximate).",
            "minimum": 0
          },
          "writable": {
            "type": "boolean",
            "description": "Whether the data directory is writable."
          }
        }
      },
      "StoredFiatRequest": {
        "type": "object",
        "description": "Persisted fiat request record.",
        "required": [
          "request_id",
          "wallet_id",
          "owner_user_id",
          "direction",
          "amount_eur",
          "provider",
          "status",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "amount_eur": {
            "type": "string",
            "description": "Requested fiat amount in EUR (human-readable decimal string)."
          },
          "beneficiary_account_holder_name": {
            "type": [
              "string",
              "null"
            ],
            "description": "Beneficiary account holder name for off-ramp payout."
          },
          "beneficiary_iban": {
            "type": [
              "string",
              "null"
            ],
            "description": "Beneficiary IBAN for off-ramp payout."
          },
          "chain_network": {
            "type": "string",
            "description": "Chain network for settlement operations (Fuji-only in current deployment)."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp."
          },
          "deposit_tx_hash": {
            "type": [
              "string",
              "null"
            ],
            "description": "Detected user deposit tx hash for off-ramp flow."
          },
          "direction": {
            "$ref": "#/components/schemas/FiatDirection",
            "description": "On-ramp vs off-ramp direction."
          },
          "expected_amount_minor": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Expected token amount in minor units.",
            "minimum": 0
          },
          "failure_reason": {
            "type": [
              "string",
              "null"
            ],
            "description": "Failure reason for terminal failed state."
          },
          "last_chain_sync_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Last chain synchronization timestamp."
          },
          "last_provider_sync_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Last provider synchronization timestamp."
          },
          "note": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional user note."
          },
          "owner_user_id": {
            "type": "string",
            "description": "Owner user ID."
          },
          "provider": {
            "type": "string",
            "description": "Selected provider identifier (stub: `truelayer_sandbox`)."
          },
          "provider_action_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional URL where user can continue provider authorization."
          },
          "provider_event_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Last provider webhook event id processed."
          },
          "provider_reference": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional provider reference/session ID."
          },
          "request_id": {
            "type": "string",
            "description": "Unique request identifier."
          },
          "reserve_transfer_tx_hash": {
            "type": [
              "string",
              "null"
            ],
            "description": "Reserve transfer tx hash for on-ramp settlement."
          },
          "service_wallet_address": {
            "type": [
              "string",
              "null"
            ],
            "description": "Service-wallet address used for reserve flows."
          },
          "status": {
            "$ref": "#/components/schemas/FiatRequestStatus",
            "description": "Current status."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp."
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet tied to this request."
          }
        }
      },
      "StoredTransaction": {
        "type": "object",
        "description": "Stored transaction record.",
        "required": [
          "tx_hash",
          "wallet_id",
          "from",
          "to",
          "amount",
          "token",
          "network",
          "status",
          "explorer_url",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "amount": {
            "type": "string",
            "description": "Amount in human-readable format"
          },
          "block_number": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Block number (if confirmed)",
            "minimum": 0
          },
          "counterparty_wallet_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional counterparty wallet ID when both sides are internal wallets."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the transaction was submitted"
          },
          "explorer_url": {
            "type": "string",
            "description": "Block explorer URL"
          },
          "from": {
            "type": "string",
            "description": "Sender address"
          },
          "gas_used": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Gas used (if confirmed)",
            "minimum": 0
          },
          "network": {
            "type": "string",
            "description": "Network (fuji or mainnet)"
          },
          "status": {
            "$ref": "#/components/schemas/TxStatus",
            "description": "Current transaction status"
          },
          "to": {
            "type": "string",
            "description": "Recipient address"
          },
          "token": {
            "$ref": "#/components/schemas/TokenType",
            "description": "Token type (native or ERC-20)"
          },
          "tx_hash": {
            "type": "string",
            "description": "Transaction hash (0x prefixed)"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the status was last updated"
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet ID that initiated the transaction"
          }
        }
      },
      "SystemStatsResponse": {
        "type": "object",
        "description": "System statistics response.",
        "required": [
          "total_wallets",
          "active_wallets",
          "suspended_wallets",
          "deleted_wallets",
          "total_bookmarks",
          "total_invites",
          "redeemed_invites",
          "total_recurring_payments",
          "uptime_seconds",
          "timestamp"
        ],
        "properties": {
          "active_wallets": {
            "type": "integer",
            "description": "Number of active wallets.",
            "minimum": 0
          },
          "deleted_wallets": {
            "type": "integer",
            "description": "Number of deleted wallets.",
            "minimum": 0
          },
          "redeemed_invites": {
            "type": "integer",
            "description": "Number of redeemed invites.",
            "minimum": 0
          },
          "suspended_wallets": {
            "type": "integer",
            "description": "Number of suspended wallets.",
            "minimum": 0
          },
          "timestamp": {
            "type": "string",
            "description": "Current timestamp."
          },
          "total_bookmarks": {
            "type": "integer",
            "description": "Total number of bookmarks.",
            "minimum": 0
          },
          "total_invites": {
            "type": "integer",
            "description": "Total number of invites.",
            "minimum": 0
          },
          "total_recurring_payments": {
            "type": "integer",
            "description": "Total number of recurring payments.",
            "minimum": 0
          },
          "total_wallets": {
            "type": "integer",
            "description": "Total number of wallets across all users.",
            "minimum": 0
          },
          "uptime_seconds": {
            "type": "integer",
            "format": "int64",
            "description": "Server uptime information.",
            "minimum": 0
          }
        }
      },
      "TokenBalance": {
        "type": "object",
        "description": "Token balance information.",
        "required": [
          "symbol",
          "name",
          "balance_raw",
          "balance_formatted",
          "decimals"
        ],
        "properties": {
          "balance_formatted": {
            "type": "string",
            "description": "Balance formatted with decimals"
          },
          "balance_raw": {
            "type": "string",
            "description": "Balance in smallest unit (wei for native, token decimals for ERC-20)"
          },
          "contract_address": {
            "type": [
              "string",
              "null"
            ],
            "description": "Contract address (None for native token)"
          },
          "decimals": {
            "type": "integer",
            "format": "int32",
            "description": "Number of decimals",
            "minimum": 0
          },
          "name": {
            "type": "string",
            "description": "Token name"
          },
          "symbol": {
            "type": "string",
            "description": "Token symbol (e.g., \"AVAX\", \"EUROC\")"
          }
        }
      },
      "TokenType": {
        "oneOf": [
          {
            "type": "string",
            "description": "Native AVAX transfer",
            "enum": [
              "native"
            ]
          },
          {
            "type": "object",
            "description": "ERC-20 token transfer (stores contract address)",
            "required": [
              "erc20"
            ],
            "properties": {
              "erc20": {
                "type": "string",
                "description": "ERC-20 token transfer (stores contract address)"
              }
            }
          }
        ],
        "description": "Token type for a transaction."
      },
      "TransactionListResponse": {
        "type": "object",
        "description": "Transaction list response.",
        "required": [
          "transactions"
        ],
        "properties": {
          "transactions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TransactionSummary"
            },
            "description": "List of transactions"
          }
        }
      },
      "TransactionStatusResponse": {
        "type": "object",
        "description": "Transaction status response.",
        "required": [
          "tx_hash",
          "status"
        ],
        "properties": {
          "block_number": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Block number (if confirmed)",
            "minimum": 0
          },
          "confirmations": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Number of confirmations",
            "minimum": 0
          },
          "gas_used": {
            "type": [
              "string",
              "null"
            ],
            "description": "Gas used (if confirmed)"
          },
          "status": {
            "type": "string",
            "description": "Status: pending, confirmed, failed"
          },
          "timestamp": {
            "type": [
              "string",
              "null"
            ],
            "description": "Timestamp"
          },
          "tx_hash": {
            "type": "string",
            "description": "Transaction hash"
          }
        }
      },
      "TransactionSummary": {
        "type": "object",
        "description": "Transaction summary for list view.",
        "required": [
          "tx_hash",
          "status",
          "direction",
          "from",
          "to",
          "amount",
          "token",
          "network",
          "explorer_url",
          "timestamp"
        ],
        "properties": {
          "amount": {
            "type": "string",
            "description": "Amount sent"
          },
          "block_number": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Block number (if confirmed)",
            "minimum": 0
          },
          "direction": {
            "type": "string",
            "description": "Direction: \"sent\" or \"received\""
          },
          "explorer_url": {
            "type": "string",
            "description": "Block explorer URL"
          },
          "from": {
            "type": "string",
            "description": "Sender address"
          },
          "network": {
            "type": "string",
            "description": "Network"
          },
          "status": {
            "type": "string",
            "description": "Status: pending, confirmed, failed"
          },
          "timestamp": {
            "type": "string",
            "description": "Timestamp"
          },
          "to": {
            "type": "string",
            "description": "Recipient address"
          },
          "token": {
            "type": "string",
            "description": "Token type"
          },
          "tx_hash": {
            "type": "string",
            "description": "Transaction hash"
          }
        }
      },
      "TrueLayerWebhookPayload": {
        "type": "object",
        "properties": {
          "data": {

          },
          "event_id": {
            "type": [
              "string",
              "null"
            ]
          },
          "payment_id": {
            "type": [
              "string",
              "null"
            ]
          },
          "payout_id": {
            "type": [
              "string",
              "null"
            ]
          },
          "reference": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "TxStatus": {
        "type": "string",
        "description": "Transaction status.",
        "enum": [
          "pending",
          "confirmed",
          "failed"
        ]
      },
      "UpdateLastPaidDateRequest": {
        "type": "object",
        "description": "Request to update the last paid date for a recurring payment.",
        "required": [
          "recurring_payment_id",
          "last_paid_date"
        ],
        "properties": {
          "last_paid_date": {
            "type": "integer",
            "format": "int32",
            "description": "New last paid date (Unix timestamp in days)."
          },
          "recurring_payment_id": {
            "type": "string",
            "description": "ID of the recurring payment."
          }
        }
      },
      "UpdateRecurringPaymentRequest": {
        "type": "object",
        "description": "Request to update an existing recurring payment.",
        "required": [
          "recurring_payment_id",
          "wallet_id",
          "wallet_public_key",
          "recipient",
          "amount",
          "currency_code",
          "payment_start_date",
          "frequency",
          "payment_end_date"
        ],
        "properties": {
          "amount": {
            "type": "number",
            "format": "double",
            "description": "Updated payment amount."
          },
          "currency_code": {
            "type": "string",
            "description": "Updated currency code."
          },
          "frequency": {
            "type": "integer",
            "format": "int32",
            "description": "Updated frequency."
          },
          "payment_end_date": {
            "type": "integer",
            "format": "int32",
            "description": "Updated end date."
          },
          "payment_start_date": {
            "type": "integer",
            "format": "int32",
            "description": "Updated start date."
          },
          "recipient": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "Updated recipient address."
          },
          "recurring_payment_id": {
            "type": "string",
            "description": "ID of the recurring payment to update."
          },
          "wallet_id": {
            "$ref": "#/components/schemas/WalletAddress",
            "description": "Updated source wallet."
          },
          "wallet_public_key": {
            "type": "string",
            "description": "Updated public key."
          }
        }
      },
      "UserMeResponse": {
        "type": "object",
        "description": "Response for GET /v1/users/me",
        "required": [
          "user_id",
          "role"
        ],
        "properties": {
          "role": {
            "$ref": "#/components/schemas/Role",
            "description": "User's role"
          },
          "session_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Session ID (if available)"
          },
          "user_id": {
            "type": "string",
            "description": "User's unique ID (from Clerk)"
          }
        }
      },
      "WalletAddress": {
        "type": "string",
        "description": "Ethereum-compatible wallet address wrapper.\n\nProvides type safety for wallet addresses throughout the API.\nFormat: `0x` followed by 40 hexadecimal characters (20 bytes).\n\n# Example\n\n```rust,ignore\nlet addr = WalletAddress::from(\"0x742d35Cc6634C0532925a3b844Bc9e7595f4aB12\");\n```"
      },
      "WalletBalanceResponse": {
        "type": "object",
        "description": "Wallet balance response including native and token balances.",
        "required": [
          "address",
          "network",
          "chain_id",
          "native_balance",
          "token_balances"
        ],
        "properties": {
          "address": {
            "type": "string",
            "description": "Wallet address"
          },
          "chain_id": {
            "type": "integer",
            "format": "int64",
            "description": "Chain ID",
            "minimum": 0
          },
          "native_balance": {
            "$ref": "#/components/schemas/TokenBalance",
            "description": "Native token balance (AVAX)"
          },
          "network": {
            "type": "string",
            "description": "Network name"
          },
          "token_balances": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TokenBalance"
            },
            "description": "ERC-20 token balances"
          }
        }
      },
      "WalletListResponse": {
        "type": "object",
        "description": "Response containing a list of wallets.",
        "required": [
          "wallets",
          "total"
        ],
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total count of wallets.",
            "minimum": 0
          },
          "wallets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WalletResponse"
            },
            "description": "List of wallets owned by the user."
          }
        }
      },
      "WalletResponse": {
        "type": "object",
        "description": "Response returned to API clients (never includes private key).",
        "required": [
          "wallet_id",
          "public_address",
          "created_at",
          "status"
        ],
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the wallet was created"
          },
          "label": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional human-readable label"
          },
          "public_address": {
            "type": "string",
            "description": "Public address"
          },
          "status": {
            "$ref": "#/components/schemas/WalletStatus",
            "description": "Current wallet status"
          },
          "wallet_id": {
            "type": "string",
            "description": "Unique wallet identifier"
          }
        }
      },
      "WalletStatus": {
        "type": "string",
        "description": "Wallet status.",
        "enum": [
          "active",
          "suspended",
          "deleted"
        ]
      }
    },
    "securitySchemes": {
      "bearer": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Clerk JWT token"
      }
    }
  },
  "tags": [
    {
      "name": "Users",
      "description": "User identity and authentication"
    },
    {
      "name": "Wallets",
      "description": "Wallet lifecycle management"
    },
    {
      "name": "Transactions",
      "description": "Transaction signing and sending"
    },
    {
      "name": "Bookmarks",
      "description": "Bookmark management"
    },
    {
      "name": "Invites",
      "description": "Invite validation and redemption"
    },
    {
      "name": "Recurring",
      "description": "Recurring payment scheduling"
    },
    {
      "name": "Fiat",
      "description": "Fiat on-ramp/off-ramp provider integrations"
    },
    {
      "name": "Admin",
      "description": "Admin-only system management"
    },
    {
      "name": "Health",
      "description": "Liveness and readiness checks"
    }
  ]
}